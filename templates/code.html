<!DOCTYPE html>
<html lang="en">
<head>
  <title>Product Verification</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/pharma.png') }}">
  <!-- Bootstrap 5.3.2 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700&display=swap" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/code.css') }}">
</head>

<body onload="getTimeZone()">

  <!-- Top Bar -->
  <header class="app-header">
    <div class="container d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center">
        <a href="https://www.squarepharma.com.bd/" class="brand d-flex align-items-center" target="_blank" rel="noopener">
          <img src="{{ url_for('static', filename='images/squarepharma.png') }}" alt="Square Pharmaceuticals PLC." class="brand-logo">
        </a>
      </div>
      <img src="{{ url_for('static', filename='images/square.png') }}" alt="Square Group" class="second-logo">
    </div>
  </header>

  <!-- Navigation Bar -->
  <nav class="app-nav navbar navbar-expand-md">
    <div class="container">

      <button
        class="navbar-toggler app-nav-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#appNavbar"
        aria-controls="appNavbar"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="appNavbar">
        <ul class="navbar-nav app-nav-list">

          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('dashboard') }}">
              <i class="fas fa-chart-line me-1"></i> Dashboard
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('batch') }}">
              <i class="fas fa-tasks me-1"></i> Assign batch
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link active" href="{{ url_for('code') }}">
              <i class="fas fa-barcode me-1"></i> Generate codes
            </a>
          </li>

        </ul>

        <button class="btn btn-outline-danger ms-auto" onclick="logoutUser()">
          <i class="fas fa-sign-out-alt me-1"></i> Logout
        </button>

      </div>

    </div>
  </nav>
  <!-- /Navigation Bar -->

  <!-- Search Code Section -->
  <section class="section-block">
    <div class="container">

      <div class="section-header d-flex justify-content-between align-items-center mb-3">
        <h2 class="section-title mb-0">
          <i class="fas fa-search me-1"></i>Search Code
        </h2>
      </div>

      <div class="card-box search-code-card">

        <form id="searchCodeForm" class="row g-3 align-items-end">

          <!-- Single Input Field -->
          <div class="col-md-4">
            <label class="form-label">Enter Code or Batch Number</label>
            <input
              type="text"
              class="form-control"
              name="searchInput"
              placeholder="Enter code or batch number"
              required
            />
          </div>

          <!-- Radio Buttons -->
          <div class="col-md-4 d-flex align-items-center gap-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="searchType" id="searchByCode" value="code" checked>
              <label class="form-check-label" for="searchByCode">Search by Code</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="searchType" id="searchByBatch" value="batch">
              <label class="form-check-label" for="searchByBatch">Search by Batch</label>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="col-md-4 d-flex justify-content-end gap-2 mt-3">
            <button type="button" class="btn btn-outline-secondary" onclick="resetSearchForm()">
              Reset
            </button>
            <button type="button" class="btn btn-primary" onclick="searchCodes()">
              <i class="fas fa-search me-1"></i>
              Search
            </button>
          </div>

        </form>

        <!-- Search Results -->
        <div class="mt-4" id="searchResults"></div>

      </div>
    </div>
  </section>
  <!-- /Search Code Section -->

  <!-- Generate Codes Section -->
  <section class="section-block mt-4">
    <div class="container">

      <div class="section-header d-flex justify-content-between align-items-center mb-3">
        <h2 class="section-title mb-0">
          <i class="fas fa-barcode me-1"></i>Generate Codes
        </h2>
      </div>

      <div class="generate-card card-box">

        <form id="generateCodeForm" class="row g-3 align-items-end">

          <!-- Batch Number -->
          <!-- <div class="col-md-6">
            <label class="form-label">Batch Number</label>
            <input
              type="text"
              class="form-control"
              name="genBatchNumber"
              placeholder="Enter batch number, e.g. BATCH-2026-001"
              required
            />
          </div> -->

          <!-- Code Count -->
          <div class="col-md-6">
            <label class="form-label">Number of Codes</label>
            <input
              type="number"
              class="form-control"
              name="genCodeCount"
              placeholder="e.g. 1000"
              min="1"
              required
            />
          </div>

          <!-- Action Buttons -->
          <div class="col-md-6 d-flex justify-content-end gap-2 mt-3">
            <button type="button" class="btn btn-outline-secondary" onclick="resetGenerateForm()">
              Reset
            </button>

            <button type="button" class="btn btn-primary" onclick="confirmGenerateCodes()">
              <i class="fas fa-barcode me-1"></i>
              Generate Codes
            </button>
          </div>

        </form>

      </div>
    </div>
  </section>
  <!-- /Generate Codes Section -->

  <!-- Code Summary Card -->
  <section class="section-block">
    <div class="container">
      <div class="section-header mb-3">
        <h2 class="section-title mb-0">
          <i class="fas fa-list me-1"></i>Code Summary
        </h2>
      </div>
      <div class="row justify-content-center">

        <div class="col-12 mb-4">
          <div class="report-card h-100">
            <div class="card-eyebrow mb-2">Code Summary</div>
            <div class="report-row">
              <span>Total Codes</span>
              <span class="report-value" id="totalCodes">—</span>
            </div>
            <div class="report-row">
              <span>Available</span>
              <span class="report-value text-success" id="availableCodes">—</span>
            </div>
            <div class="report-row">
              <span>Used</span>
              <span class="report-value text-danger" id="usedCodes">—</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
  <!-- /Code Summary Card -->

  <!-- Footer -->
  <footer class="app-footer">
    <div class="container d-flex flex-wrap justify-content-between align-items-center">
      <p class="mb-0">© 2026 <a href="https://www.squarepharma.com.bd" target="_blank" rel="noopener">Square Pharmaceuticals PLC.</a> All rights reserved.</p>
      <div class="footer-links">
        <a href="https://www.squarepharma.com.bd/about-us.php" target="_blank" rel="noopener">About</a>
        <a href="https://www.squarepharma.com.bd/contact-us.php" target="_blank" rel="noopener">Contact</a>
        <a href="https://www.facebook.com/SquarePharmaLtd/" target="_blank" rel="noopener"><i class="fab fa-facebook-f"></i></a>
        <a href="https://bd.linkedin.com/company/square-pharmaceuticals" target="_blank" rel="noopener"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </div>
  </footer>

  <!-- Scroll To Top Button -->
  <button id="backToTopBtn" class="back-to-top-btn" style="display:none" onclick="scrollToTop()">↑</button>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

  <!-- Your existing JS -->
  <script src="{{ url_for('static', filename='js/code.js') }}"></script>

</body>
</html>
